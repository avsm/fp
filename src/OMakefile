.PHONY: clean

OCAMLFLAGS    += -dtypes

# Runtime library

LIB_FILES[] =
    fp_lib

LIB = fp_lib
FP_LIB = $(OCamlLibrary $(LIB), $(LIB_FILES))


# Compiler

GEN_FILES = parser.mli parser.ml lexer.ml
OCamlGeneratedFiles($(GEN_FILES))
FP_FILES[] =
    location
    lexer
    parser
    ast
    asttypes
    ident
    env
    types
    typing
    fpc

FP = fp
FP_COMPILER = $(OCamlProgram $(FP), $(FP_FILES))

.DEFAULT: $(FP_COMPILER) $(FP_LIB)

clean:
    $(CLEAN) $(FP_COMPILER) $(FP_LIB) *.cmi *.cmo *.o *.a *.annot *.cmx *.cmxa $(GEN_FILES) *.output
